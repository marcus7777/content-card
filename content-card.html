<link rel="import" href="../paper-tabbed-pages/paper-tabbed-pages.html">
<link rel="import" href="../polymer-quill/polymer-quill.html">
<link rel="import" href="../paper-dialog/paper-dialog.html">
<link rel="import" href="../iron-image/iron-image.html">
<link rel="import" href="../polymer/polymer.html">
<!--
  `<content-card></content-card>` svg
  @demo demo.html
-->
<dom-module id="content-card">
  <template>
    <style>
      h2 {
        font-weight: 300;
        font-size: 18px;
        margin: 0px;
        display: block;
        width: 180px;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
        margin: 0px 10px;
      }
      .container {
        text-align: center;
      }
    </style>
    <div on-tap="open">
      <template is="dom-if" if="[[image]]">
        <iron-image contain src="[[image]]"></iron-image>
      </template>
      <h2 style="text-align: center">[[title]]</h2>
      <div class="container">[[desc]]</div>
    </div>
    <paper-dialog id="dialog">
      <template is="dom-if" if="[[edit]]">
        <paper-tabbed-pages tabs='["preview","edit","stats"]'>
          <preview-tab>
            <div inner-h-t-m-l="{{a}}"></div>
          </preview-tab>
          <edit-tab>
            <polymer-quill content="{{value}}" html="{{a}}"></polymer-quill>
          </edit-tab>
          <stats-tab>
            no stats 
          </stats-tab>
        </paper-tabbed-pages>
      </template>
      <polymer-quill hidden content="[[value]]" html="{{a}}"></polymer-quill>
      <template is="dom-if" if="[[!edit]]">
        <div inner-h-t-m-l="{{a}}"></div>
      </template>
    </paper-dialog>
  </template>
</dom-module>
<script>
  Polymer({
    is: "content-card",
    properties:{
      edit:{
        type:Boolean,
        value:false,
      },
      value: {
        type:Object,
        notify:true,
      },
      locked:{
        type:Boolean,
        value:false,
      },
    },
    open: function(){
      if (!this.locked) {
        this.$.dialog.open()
      } else {
        this.fire("open","content-card")
      }
    },
  })
</script>
